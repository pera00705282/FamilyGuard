# API Keys Setup Guide

## Quick Setup

### Option 1: Interactive Setup (Recommended)
```bash
# Run the interactive setup script
python setup_api_keys.py
```

This script will:
- Guide you through entering API keys securely (hidden input)
- Help you configure each exchange
- Ensure sandbox mode is enabled
- Save everything to `config/config.yaml`

### Option 2: Manual Setup

1. **Create the config file:**
   ```bash
   # The config file should already exist at: config/config.yaml
   # If not, copy from template
   ```

2. **Edit `config/config.yaml`** and replace the placeholder values:
   ```yaml
   exchanges:
     binance:
       api_key: "your_actual_api_key_here"
       secret: "your_actual_secret_here"
       sandbox: true  # Keep true for testing!
   ```

## Getting API Keys

### Binance

1. **Go to:** https://www.binance.com/en/my/settings/api-management
2. **Login** to your Binance account
3. **Click** "Create API"
4. **Label:** Give it a name (e.g., "Trading Bot")
5. **Security:**
   - ✅ Enable "Enable Reading"
   - ✅ Enable "Enable Spot & Margin Trading" (if needed)
   - ⚠️ **IMPORTANT:** Enable "Restrict access to trusted IPs only"
   - ❌ Do NOT enable "Enable Withdrawals" (security risk!)
6. **Complete** security verification
7. **Copy** the API Key and Secret Key
8. **Save** the Secret Key immediately (you won't see it again!)

**Sandbox/Testnet:**
- Binance Testnet: https://testnet.binance.vision/
- Use testnet API keys for safe testing

### Coinbase Advanced Trade

1. **Go to:** https://www.coinbase.com/settings/api
2. **Login** to your Coinbase account
3. **Click** "Create API Key"
4. **Name:** Give it a name (e.g., "Trading Bot")
5. **Permissions:** Select minimum required:
   - ✅ View (read-only)
   - ✅ Trade (if needed)
   - ❌ Transfer (not needed, security risk)
6. **Copy** the API Key, Secret Key, and **Passphrase**
7. **Save** all three immediately!

**Sandbox:**
- Coinbase Advanced Trade has a sandbox environment
- Use sandbox API keys for testing

### Kraken

1. **Go to:** https://www.kraken.com/u/security/api
2. **Login** to your Kraken account
3. **Click** "Generate API Key"
4. **Key Description:** Give it a name (e.g., "Trading Bot")
5. **Permissions:** Select minimum required:
   - ✅ Query Funds
   - ✅ Create & Modify Orders (if needed)
   - ❌ Withdraw Funds (NOT recommended!)
6. **Copy** the API Key and Secret Key
7. **Save** the Secret Key immediately!

**Sandbox:**
- Kraken has a test environment
- Use test API keys for safe testing

## Security Best Practices

### ⚠️ CRITICAL Security Rules

1. **NEVER commit `config/config.yaml` to version control**
   - Add to `.gitignore`:
     ```
     config/config.yaml
     ```

2. **ALWAYS use sandbox mode first**
   - Set `sandbox: true` for all exchanges
   - Test thoroughly before enabling live trading

3. **Use minimum permissions**
   - Only enable what you need
   - Never enable withdrawals via API

4. **Enable IP whitelisting**
   - Restrict API access to your IP address
   - Prevents unauthorized access if keys are compromised

5. **Keep keys secure**
   - Don't share API keys
   - Don't store in plain text (use environment variables if possible)
   - Rotate keys periodically

6. **Test with small amounts first**
   - Even in live mode, start with minimal amounts
   - Verify everything works correctly

## Configuration File Structure

```yaml
exchanges:
  binance:
    api_key: "your_api_key"
    secret: "your_secret"
    sandbox: true  # ⚠️ Keep true for testing!
    rate_limit: 100
    enable_rate_limit: true

  coinbase:
    api_key: "your_api_key"
    secret: "your_secret"
    passphrase: "your_passphrase"  # Required for Coinbase
    sandbox: true
    rate_limit: 100
    enable_rate_limit: true

  kraken:
    api_key: "your_api_key"
    secret: "your_secret"
    sandbox: true
    rate_limit: 100
    enable_rate_limit: true

trading:
  symbols:
    - "BTC/USDT"
    - "ETH/USDT"
  strategies:
    - "conservative"
  max_positions: 5
  risk_management:
    max_position_size: 0.1
    stop_loss_pct: 0.02
    take_profit_pct: 0.04
    max_daily_trades: 20
    max_drawdown_pct: 0.15

monitoring:
  enable_alerts: true
  alert_channels:
    - "console"

enable_live_trading: false  # ⚠️ Keep false until thoroughly tested!
log_level: "INFO"
```

## Verifying Your Configuration

After setting up your API keys, verify the configuration:

```bash
# Set PYTHONPATH
$env:PYTHONPATH="src"  # PowerShell
# OR
export PYTHONPATH=src  # Linux/Mac

# Test loading the config
python -c "from crypto_trading.utils.config import load_config; config = load_config('config/config.yaml'); print('✅ Configuration is valid!')"
```

## Testing API Connections

Once configured, you can test the connections (you may need to implement connection testing in the tool):

```bash
# The tool should have connection testing functionality
# Check the examples or main script for test commands
```

## Troubleshooting

### "Configuration file not found"
- Make sure `config/config.yaml` exists
- Run `python setup_api_keys.py` to create it

### "At least one exchange must be configured"
- You need to configure at least one exchange
- Edit `config/config.yaml` and add exchange configuration

### "Invalid API key format"
- Check that your API keys are correct
- Verify no extra spaces or quotes
- Ensure you copied the full key

### API Connection Errors
- Verify API keys are correct
- Check if sandbox mode matches your API key type
- Ensure IP whitelisting allows your IP (if enabled)
- Verify API key permissions are correct

## Next Steps

1. ✅ Configure API keys (this guide)
2. ✅ Verify configuration loads correctly
3. ✅ Test in sandbox mode
4. ✅ Run demo: `python start_demo.py`
5. ✅ Test with small amounts (if going live)
6. ✅ Monitor and adjust strategies

---

**Remember: Security first! Always test in sandbox mode before using real money.**

